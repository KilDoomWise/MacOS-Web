<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coin Clicker</title>
    <style>
        @font-face {
            font-family: SF;
            src: url("/extra/sf.woff2");
        }
        html {
            padding-top: 1.80rem;
        }
        body {
            padding-top: .60rem;
            font-family: SF, serif;
            color: white;
            background-color: #000000e8;
            -webkit-user-select: none;
            -moz-user-select: -moz-none;
            -ms-user-select: none;
            user-select: none;
        }
        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-top: 20px;
        }
        .progress-container {
            width: 300px;
            height: 20px;
            background-color: #000000;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 10px;
            position: relative;
        }
        .progress-bar {
            width: 0%;
            height: 100%;
            background-color: #4CAF50;
            transition: width 0.3s ease-in-out;
        }
        .progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: black;
            font-size: 14px;
            z-index: 1;
        }
        .clicks {
            font-size: 18px;
            margin-bottom: 20px;
        }
        .coin {
            width: 200px;
            height: 200px;
            background-image: url("https://kildoom.com/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fkildoom.c8b94d03.png&w=256&q=75");
            border: 6px solid rgb(255, 174, 0);
            background-size: cover;
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.1s;
            position: relative;
            cursor: url('/extra/cursors/pointer.png'), auto;
        }
        .plus-one {
            position: absolute;
            font-size: 24px;
            color: #000000;
            font-weight: bold;
            pointer-events: none;
            opacity: 0;
            transition: transform 0.5s, opacity 0.5s;
        }
        @keyframes newCoinz {
            0%{
                transform: rotate(0deg);
            }
            100%{
                transform: rotate(360deg);
            }
        }
        .newCoin{
            transition: all .3s ease-in-out;
            animation: newCoinz 0.7s ease-in-out;
        }
        .upgrades{
            margin-top: 20px;
            background: #24242483;
            width: auto;
            border-radius: 10px;
            padding: 10px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 2fr));
            gap: 8px;
        }
        .upgrade{
            width: 98%;
            height: 60px;
            background: #141414a6;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: .2s ease-in-out;
            padding: 5px;
            cursor: pointer;
        }
        .upgrade:hover{
            background: #363636a6;
        }
        .upgradename{
            margin-top: -2px;
            margin-left: 10px;
        }
        .upgradelevel{
            display: flex;
            margin-left: 100px;
            white-space: nowrap;
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.521);
        }

        .modal-content {
            background-color: #000000;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            border-radius: 10px;
            width: 30%;
        }

        .close-button {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        .close-button:hover,
        .close-button:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
        .dialog-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(5px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }

        .dialog {
            background-color: rgba(0, 0, 0, 0.123);
            backdrop-filter: blur(20px);
            border-radius: 15px;
            padding: 25px;
            width: 320px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .dialog-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #ffffff;
        }

        .dialog-message {
            margin-bottom: 20px;
            color: #e0e0e0;
        }

        .dialog-buttons {
            display: flex;
            justify-content: flex-end;
        }

        .dialog-button {
            background-color: rgba(255, 255, 255, 0.1);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            margin-left: 10px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            backdrop-filter: blur(5px);
        }

        .dialog-button:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }
    </style>
</head>
<body>
    <div class="dialog-overlay" id="modal" style="display: none;">
        <div class="dialog">
            <div class="dialog-title" id="modal-title">Модальное окно</div>
            <div class="dialog-message" id="modal-message">Это сообщение в модальном окне.</div>
            <div class="dialog-buttons">
                <button class="dialog-button" id="modal-button">OK</button>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="progress-container">
            <div class="progress-bar" id="progressBar">
                <span id="progress-bar-text"></span>
            </div>
        </div>
        <div class="clicks" id="clicks">Clicks: 0</div>
        <div class="coin" id="coin">
            
        </div>
        <div class="upgrades">
            <div class="upgrade">
                <span class="upgradename">
                    Мульти-Тап
                </span>
                <span class="upgradelevel">0/5</span>
            </div>

        </div>
    </div>
</body>

<script>
const coin = document.getElementById("coin");
const progressBar = document.getElementById("progressBar");
const clicksDisplay = document.getElementById("clicks");
let lastClickTime = 0;
let clicks = 0;
let coinType = 1;
let newCoinAnimationPlayed = false;
let progressBarMax = 35; // Начальное значение для первой монеты

let multiTapLevel = 0;
let multiTapCost = [10, 35, 75, 105, 125];
let multiTapClicksPerTap = [1, 3, 5, 7, 9, 11];

let autoClickerLevel = 0;
let autoClickerCost = [800, 2000, 4000];
let autoClickerInterval;

let boostActive = false;
let boostCost = 350;
let boostDuration = 20000; // 20 секунд
let boostClicksPerSecond = 10;
let boostInterval, boostClickInterval;

let autoClickerWarnings = 0;

const modal = document.getElementById("modal");
const closeButton = document.querySelector("#modal-button");

function showModal(title, message) {
    document.getElementById("modal-title").textContent = title;
    document.getElementById("modal-message").textContent = message;
    modal.style.display = "flex";
}

function hideModal() {
    modal.style.display = "none";
}

closeButton.addEventListener("click", hideModal);


function updateClicks() {
    clicksDisplay.textContent = `Clicks: ${clicks}`;
    const progress = (clicks / progressBarMax) * 100;
    progressBar.style.width = `${progress}%`;
    progressBar.innerText = clicks + ' / ' + progressBarMax;
}


function newCoin(id) {
    if (id === 1 && !newCoinAnimationPlayed) {
        document.getElementById("coin").style.backgroundImage = 'url("https://kildoom.com/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fkildoom.c8b94d03.png&w=256&q=75")';
        coin.classList.add("newCoin");
        setTimeout(() => {
            coin.classList.remove("newCoin");
        }, 700);
        newCoinAnimationPlayed = true;
        
        progressBarMax = 35; // Увеличиваем в два раза при каждой новой монете
        updateClicks();
    } else if (id === 2 && !newCoinAnimationPlayed) {
        document.getElementById("coin").style.backgroundImage = 'url("https://cdn.discordapp.com/avatars/670548556624429066/9e220c3ab8866dca1f409fd188908ed6.png?size=1024")';
        coin.classList.add("newCoin");
        setTimeout(() => {
            coin.classList.remove("newCoin");
        }, 700);
        newCoinAnimationPlayed = true;
        
        progressBarMax = progressBarMax *= 2; // Увеличиваем в два раза при каждой новой монете
        updateClicks();
    } else if (id === 3 && !newCoinAnimationPlayed) {
        document.getElementById("coin").style.backgroundImage = 'url("https://cdn.discordapp.com/avatars/670548556624429066/9e220c3ab8866dca1f409fd188908ed6.png?size=1024")';
        coin.classList.add("newCoin");
        setTimeout(() => {
            coin.classList.remove("newCoin");
        }, 700);
        newCoinAnimationPlayed = true;
        
        progressBarMax = 500; // Увеличиваем в два раза при каждой новой монете
        updateClicks();
    }
    newCoinAnimationPlayed = false;
}

function coinClickHandler(e) {
    const currentTime = Date.now();
    const timeSinceLastClick = currentTime - lastClickTime;

    // Установим минимальное время между кликами (например, 100 мс)
    const minClickDelay = 30;

    if (timeSinceLastClick >= minClickDelay) {
        const rect = coin.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;

        const centerX = rect.width / 2;
        const centerY = rect.height / 2;

        const angleX = (centerY - y) / centerY * 20;
        const angleY = (x - centerX) / centerX * 20;

        coin.style.transform = `perspective(500px) rotateX(${angleX}deg) rotateY(${angleY}deg) scale(0.95)`;

        const clicksPerTap = multiTapClicksPerTap[multiTapLevel];
        clicks += clicksPerTap;
        updateClicks();
        showPlusOne(x, y, clicksPerTap);

        if (clicks === 35) {
            newCoin(2);
        } else if (clicks === 70) {
            newCoin(3);
        }

        // Возвращаем монету в исходное положение
        coin.style.transform = "perspective(500px) rotateX(0) rotateY(0) scale(1)";

        // Обновляем время последнего клика
        lastClickTime = currentTime;
    } else {
        // Пользователь кликает слишком быстро, возможно, использует автокликер
        autoClickerWarnings++;

        // Выводим предупреждение, если количество предупреждений меньше 3
        if (autoClickerWarnings < 3) {
            showModal("Ты ахуел?", "Играй честно зачем ты мне свой автокликер суешь чукча. Еще 3 раза и пойдешь нахуй.");
        } else {
            // Если количество предупреждений достигло 3, отключаем возможность клика
            showModal("Ну ты ахуел", "Крч иди нахуй со своим автокликером");
            coin.removeEventListener("mousedown", coinClickHandler);
        }
    }
}

coin.addEventListener("mousedown", coinClickHandler);
coin.addEventListener("mouseup", () => {
    coin.style.transform = "perspective(500px) rotateX(0) rotateY(0) scale(1)";
});

coin.addEventListener("mouseleave", () => {
    coin.style.transform = "perspective(500px) rotateX(0) rotateY(0) scale(1)";
});


function updateUpgradeInfo() {
    // Обновляем информацию об улучшениях
    document.querySelector(".upgradename:nth-child(1) + .upgradelevel").textContent = `${multiTapLevel}/5`;
    document.querySelector(".upgradename:nth-child(2) + .upgradelevel").textContent = `${autoClickerLevel}/3`;
    document.querySelector(".upgradename:nth-child(3) + .upgradelevel").textContent = boostActive ? "Active" : "0/1";
}

function showPlusOne(x, y, clicksPerTap) {
    const plusOne = document.createElement("div");
    plusOne.className = "plus-one";
    plusOne.textContent = `+${clicksPerTap}`;
    plusOne.style.left = `${x}px`;
    plusOne.style.top = `${y}px`;
    coin.appendChild(plusOne);

    setTimeout(() => {
        plusOne.style.opacity = "1";
        plusOne.style.transform = "translateY(-20px)";
    }, 0);

    setTimeout(() => {
        plusOne.style.opacity = "0";
        plusOne.style.transform = "translateY(-40px)";
    }, 500);

    setTimeout(() => {
        coin.removeChild(plusOne);
    }, 1000);
}

function updateUpgradeInfo() {
    // Обновляем информацию об улучшениях
    document.querySelector(".upgradename:nth-child(1) + .upgradelevel").textContent = `${multiTapLevel}/3`;
    document.querySelector(".upgradename:nth-child(2) + .upgradelevel").textContent = `${autoClickerLevel}/3`;
    document.querySelector(".upgradename:nth-child(3) + .upgradelevel").textContent = boostActive ? "Active" : "0/1";
}

function buyMultiTap() {
    if (clicks >= multiTapCost[multiTapLevel] && multiTapLevel < 5) {
        multiTapLevel++;
        clicks -= multiTapCost[multiTapLevel - 1];
        updateClicks();
        updateUpgradeInfo();        // Обновляем обработчик клика с учетом улучшения
        coin.removeEventListener("mousedown", coinClickHandler);
        coin.addEventListener("mousedown", coinClickHandler);
    }
}

function buyAutoClicker() {
    if (clicks >= autoClickerCost[autoClickerLevel] && autoClickerLevel < 3) {
        autoClickerLevel++;
        clicks -= autoClickerCost[autoClickerLevel - 1];
        updateClicks();
        updateUpgradeInfo();
        startAutoClicker(); // Запускаем автокликер
    }
}

function buyBoost() {
    if (clicks >= boostCost && !boostActive) {
        boostActive = true;
        clicks -= boostCost;
        updateClicks();
        updateUpgradeInfo();
        startBoost(); // Запускаем буст
    }
}

function startAutoClicker() {
    const clicksPerSecond = [5, 10, 15][autoClickerLevel];
    autoClickerInterval = setInterval(() => {
        clicks += clicksPerSecond;
        updateClicks();
    }, 1000);
}

function stopAutoClicker() {
    clearInterval(autoClickerInterval);
}

function startBoost() {
    let boostTimer = boostDuration;
    boostInterval = setInterval(() => {
        boostTimer -= 1000;
        if (boostTimer <= 0) {
            clearInterval(boostInterval);
            clearInterval(boostClickInterval);
            boostActive = false;
            updateUpgradeInfo();
        }
    }, 1000);

    boostClickInterval = setInterval(() => {
        clicks += boostClicksPerSecond;
        updateClicks();
    }, 1000);
}

function stopBoost() {
    clearInterval(boostInterval);
    clearInterval(boostClickInterval);
    boostActive = false;
    updateUpgradeInfo();
}

document.querySelectorAll(".upgrade").forEach((upgrade, index) => {
    upgrade.addEventListener("click", () => {
        switch (index) {
            case 0:
                buyMultiTap();
                break;
            case 1:
                buyAutoClicker();
                break;
            case 2:
                buyBoost();
                break;
        }
    });
});
</script>